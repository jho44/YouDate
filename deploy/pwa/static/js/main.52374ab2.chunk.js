(this["webpackJsonpyoudate-frontend"]=this["webpackJsonpyoudate-frontend"]||[]).push([[0],{187:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(29),o=n.n(a),s=(n(187),n(21)),r=n(301),l=n.p+"static/media/datifyLogo.e2b01df3.png",u=n(174);Object(u.a)({apiKey:"AIzaSyBKiyluRRzKamxd8NgFmYduWxerInedvR0",authDomain:"datify-49ddc.firebaseapp.com",projectId:"datify-49ddc",storageBucket:"datify-49ddc.appspot.com",messagingSenderId:"426040737519",appId:"1:426040737519:web:68c4717f117fff6344651a",measurementId:"G-2D806J8GZC"});var d="http://ec2-3-144-103-133.us-east-2.compute.amazonaws.com:8000",j="http://youdate.s3-website.us-east-2.amazonaws.com",h="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("9cf53a8f93444cadac7b3e6d990a9e6d","&response_type=code&scope=").concat(["user-top-read","user-read-email"].join("%20"),"&redirect_uri=").concat(j),b=n(4),f=Object(r.a)({login:{display:"grid",placeItems:"center",height:"100vh",backgroundColor:"black","& img":{width:"50%"},"& a":{padding:"20px",borderRadius:"99px",backgroundColor:"#EE82EE",fontWeight:600,color:"white",textDecoration:"none"},"& a:hover":{backgroundColor:" white",borderColor:"#1db954",color:"#EE82EE"}}});var m=function(e){var t=e.state,n=f();return Object(b.jsxs)("div",{className:n.login,children:[Object(b.jsx)("img",{src:l,alt:"Youdate Logo",style:{maxHeight:"35vh",display:"block",width:"auto",height:"auto"}}),Object(b.jsx)("a",{href:"".concat(h).concat(t&&"/"!==t?t:"/meet/"),children:"LOGIN WITH SPOTIFY"})]})},O=n(19),p=c.a.createContext(null),x=function(e){var t=e.children,n=Object(i.useState)(null),c=Object(O.a)(n,2),a=c[0],o=c[1],s=Object(i.useState)(null),r=Object(O.a)(s,2),l=r[0],u=r[1],d=Object(i.useState)([]),j=Object(O.a)(d,2),h=j[0],f=j[1],m=Object(i.useState)(0),x=Object(O.a)(m,2),g=x[0],v=x[1];return Object(b.jsx)(p.Provider,{value:{tokens:a,setTokens:o,user:l,setUser:u,unmetList:h,setUnmetList:f,unmetListInd:g,setUnmetListInd:v},children:t})},g=n(65),v=(n(40),n(305)),_=n(307),k=v.a.Option;function y(e){var t=Object(g.a)({},e);t.QAs=[{Q:"Life goal of mine...",A:t.life_goal},{Q:"Believe it or not, I...",A:t.believe_or_not},{Q:"My life peaked when...",A:t.life_peaked},{Q:"I feel famous when...",A:t.feel_famous},{Q:"Biggest risk I've ever taken",A:t.biggest_risk}];for(var n=0,i=["life_goal","believe_or_not","life_peaked","feel_famous","biggest_risk"];n<i.length;n++){delete t[i[n]]}t.tidbits=[{key:"desired_relationship",val:t.desired_relationship},{key:"education",val:t.education},{key:"occupation",val:t.occupation},{key:"sexual_orientation",val:t.sexual_orientation},{key:"location",val:t.location},{key:"political_view",val:t.political_view},{key:"height",val:t.height}];for(var c=0,a=["desired_relationship","education","occupation","sexual_orientation","location","political_view","height"];c<a.length;c++){delete t[a[c]]}if(!Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENVIRONMENT){var o=new Date,s=o.getFullYear()-t.birth_month._DateTime__date._Date__year;o.getMonth()-t.birth_month._DateTime__date._Date__month<0&&s--,t.age=s}return t}var w=function(){return{child:Object(b.jsxs)(v.a,{style:{width:"50%"},children:[Object(b.jsx)(k,{value:"casual",children:"Go with the flow"}),Object(b.jsx)(k,{value:"short-term",children:"Short Term"}),Object(b.jsx)(k,{value:"long-term",children:"Long Term"}),Object(b.jsx)(k,{value:"other",children:"Other"})]}),name:"desired_relationship",label:"Desired Relationship",rules:[{required:!0}]}},C=function(){return{child:Object(b.jsx)(_.a,{}),name:"education",label:"Education"}},S=function(){return{child:Object(b.jsx)(_.a,{}),name:"occupation",label:"Occupation"}},T=function(){return{child:Object(b.jsx)(_.a,{}),name:"sexual_orientation",label:"Sexual Orientation"}},E=function(){return{child:Object(b.jsx)(_.a,{}),name:"location",label:"My Location"}},N=function(){return{child:Object(b.jsxs)(v.a,{style:{width:"50%"},allowClear:!0,children:[Object(b.jsx)(k,{value:"anarchism",children:"Anarchism"}),Object(b.jsx)(k,{value:"communism",children:"Communism"}),Object(b.jsx)(k,{value:"conservatism",children:"Conservatism"}),Object(b.jsx)(k,{value:"environmentalism",children:"Environmentalism"}),Object(b.jsx)(k,{value:"fascism",children:"Fascism"}),Object(b.jsx)(k,{value:"feminism",children:"Feminism"}),Object(b.jsx)(k,{value:"liberalism",children:"Liberalism"}),Object(b.jsx)(k,{value:"nationalism",children:"Nationalism"}),Object(b.jsx)(k,{value:"populism",children:"Populism"}),Object(b.jsx)(k,{value:"socialism",children:"Socialism"}),Object(b.jsx)(k,{value:"other",children:"Other"})]}),name:"political_view",label:"Political View"}},I=function(){return{child:Object(b.jsx)(_.a,{}),name:"height",label:"Height"}},L=function(){return{child:Object(b.jsx)(_.a,{}),name:"life_goal",label:"Life goal of mine..."}},P=function(){return{child:Object(b.jsx)(_.a,{}),name:"believe_or_not",label:"Believe it or not, I..."}},A=function(){return{child:Object(b.jsx)(_.a,{}),name:"life_peaked",label:"My life peaked when..."}},F=function(){return{child:Object(b.jsx)(_.a,{}),name:"feel_famous",label:"I feel famous when..."}},R=function(){return{child:Object(b.jsx)(_.a,{}),name:"biggest_risk",label:"Biggest risk I've ever taken"}},U=[w(),C(),S(),T(),E(),N(),I()],D=[L(),P(),A(),F(),R()];function B(e){return U.map((function(t,n){return e.push(t)})),D.map((function(t,n){return e.push(t)})),e}function W(e){return Object(g.a)(Object(g.a)({},M(e)),Y(e))}function M(e){return{desired_relationship:e.desired_relationship||null,education:e.education||null,occupation:e.occupation||null,sexual_orientation:e.sexual_orientation||null,location:e.location||null,political_view:e.political_view||null,height:e.height||null}}function Y(e){return{life_goal:e.life_goal||null,believe_or_not:e.believe_or_not||null,life_peaked:e.life_peaked||null,feel_famous:e.feel_famous||null,biggest_risk:e.biggest_risk||null}}var z=function(e){var t=e.children,n=Object(i.useContext)(p),c=n.setTokens,a=n.tokens,o=n.user,r=n.setUser,l=Object(s.e)(),u=Object(s.f)();return Object(i.useEffect)((function(){var e=new URLSearchParams(l.search).get("code"),t=null;if(null===a&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENVIRONMENT&&"test"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENVIRONMENT){c({access_token:"fake_token",refresh_token:"fake_token"});var n=y({user_id:"fake_test_user_id",email:"fakeemail@fake.com",pic:null,name:"Fake User",pronouns:"fake pronouns",age:0,description:"fake description",top_artists:[],top_songs:[],life_goal:"fake life goal",believe_or_not:"fake believe it or not",life_peaked:"fake life peaked",feel_famous:"fake feel famous",biggest_risk:"fake biggest risk",desired_relationship:"Other",education:"fake education",occupation:"fake occupation",sexual_orientation:"fake sexual orientation",location:"fake location",political_view:"fake political view",height:"fake height"});r(n)}else null===a&&e&&fetch("".concat(d,"/accessToken?code=").concat(e,"&redirect=").concat(j).concat(l.pathname)).then((function(e){return e.json()})).then((function(e){return c({accessToken:e.access_token,refreshToken:e.refresh_token}),t=e.access_token,fetch("".concat(d,"/getUser?token=").concat(t))})).then((function(e){return e.json()})).then((function(e){var t=e[0];if(404!==e[1]){var n=y(t);r(n)}else u("/info-form")})).catch((function(e){return console.error(e)}))}),[a,l.search,c,l.pathname,u,r]),null!==a&&null!==o?t:Object(b.jsx)(m,{state:l.pathname})},K=n(299),Q=n(52),H=n(60),J=n(93),V=n(291),q=function(e){var t=e.user,n=e.offsetY;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"pic",children:[t.pic?Object(b.jsx)("div",{className:"profilePhoto",style:{backgroundImage:"url('".concat(t.pic,"')"),transform:"translateY(".concat(.2*n,"px)")}}):Object(b.jsx)("div",{className:"profilePhoto",style:{transform:"translateY(".concat(.2*n,"px)"),padding:0,border:"solid white"},children:Object(b.jsx)(V.a,{style:{height:"100%",width:"100%",color:"white"}})}),Object(b.jsxs)("div",{className:"userInfo",style:{transform:"translateY(".concat(.3*n,"px)")},children:[Object(b.jsxs)("div",{className:"nameAndAge",children:[Object(b.jsx)("div",{className:"name",children:t.name}),Object(b.jsx)("div",{className:"age",children:t.age})]}),Object(b.jsxs)("div",{className:"pronouns",children:["(",t.pronouns,")"]}),Object(b.jsx)("div",{className:"userDescription",children:t.description&&t.description.replace(/\\'/g,"'")})]})]})})},G=function(e){var t=e.Component,n=void 0===t?V.a:t,i=e.content;return Object(b.jsxs)("div",{style:{marginBottom:"1rem",display:"flex",alignItems:"center"},children:[Object(b.jsx)(n,{style:{fontSize:"2rem",marginRight:"0.5rem",color:"white"}}),Object(b.jsx)("span",{children:i})]})},Z=function(e){var t=e.Q,n=e.A;return Object(b.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(b.jsx)("h4",{children:t}),Object(b.jsx)("span",{children:n})]})},$=n(54),X=n.n($),ee=n(75),te=function(e){var t=e.user,n=e.userContent,c=e.type,a=Object(i.useContext)(p).tokens,o=Object(i.useState)([]),s=Object(O.a)(o,2),r=s[0],l=s[1],u=Object(i.useCallback)(Object(ee.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(ee.a)(X.a.mark((function e(t){var n,i,o,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/search?q=".concat(c,":").concat(t,"&type=").concat(c),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.accessToken}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(i=e.sent,e.prev=6,"artist"!==c){e.next=13;break}return e.next=10,i.artists.items[0].images[0].url;case 10:o=e.sent,e.next=16;break;case 13:return e.next=15,i.tracks.items[0].album.images[0].url;case 15:o=e.sent;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),o=null;case 21:return e.t1=t,e.next=24,o;case 24:return e.t2=e.sent,e.next=27,{name:e.t1,img:e.t2};case 27:return s=e.sent,e.next=30,s;case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))),[a,c,n]);return Object(i.useEffect)((function(){u()}),[u]),Object(b.jsx)(b.Fragment,{children:t&&r.map((function(e,t){return Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)("div",{className:"photo",style:{backgroundImage:"url('".concat(e.img,"')"),backgroundColor:"grey",width:85,height:85,marginBottom:"1rem"}}),Object(b.jsx)("span",{style:{paddingLeft:"1rem"},children:e.name})]},t)}))})},ne=n(292),ie=n(293),ce=n(294),ae=n(295),oe=n(296),se=n(297),re=n(298),le=n(304),ue=le.a.Title,de=function(e){var t=e.meet,n=e.user,i=e.offsetY,c=e.dislike,a=e.like;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q,{user:n,offsetY:i}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"Artists in Common"}),(!n||!n.artists_in_common.length)&&Object(b.jsx)(ue,{level:5,style:{color:"#dbdbdb"},children:"No top artists in common"}),Object(b.jsx)(te,{user:n,userContent:n.artists_in_common,type:"artist"}),Object(b.jsx)("h3",{children:"Songs in Common"}),(!n||!n.songs_in_common.length)&&Object(b.jsx)(ue,{level:5,style:{color:"#dbdbdb"},children:"No top songs in common"}),Object(b.jsx)(te,{user:n,userContent:n.songs_in_common,type:"track"}),n&&n.tidbits&&Object(b.jsx)("h3",{children:"Tidbits"}),Object(b.jsx)("div",{className:"basic-info column-flex",children:n&&n.tidbits.map((function(e,t){var n=e.key,i=e.val;if(i){var c;switch(n){case"desired_relationship":c=ne.a;break;case"education":c=ie.a;break;case"occupation":c=ce.a;break;case"sexual_orientation":c=ae.a;break;case"location":c=oe.a;break;case"political_view":c=se.a;break;case"height":c=re.a}return Object(b.jsx)(G,{Component:c,content:i},t)}return Object(b.jsx)(b.Fragment,{})}))}),n&&n.QAs&&Object(b.jsx)("h3",{children:"QAs"}),n&&n.QAs.map((function(e,t){return e.A?Object(b.jsx)(Z,{Q:e.Q,A:e.A},t):Object(b.jsx)(b.Fragment,{})})),t&&Object(b.jsx)("div",{style:{position:"fixed",bottom:75,left:"50%",transform:"translate(-50%, -50%)"},children:Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(b.jsx)("div",{style:{marginRight:"5rem"},children:Object(b.jsx)(Q.a,{ghost:!0,size:"large",icon:Object(b.jsx)(H.a,{style:{color:"white"}}),onClick:c,"data-testid":"left-swipe"})}),Object(b.jsx)(Q.a,{ghost:!0,size:"large",icon:Object(b.jsx)(J.a,{style:{color:"white"}}),onClick:a,"data-testid":"right-swipe"})]})})]})]})},je=(le.a.Title,function(){var e=Object(i.useContext)(p),t=e.user,n=e.setUnmetList,c=e.unmetList,a=e.unmetListInd,o=e.setUnmetListInd,s=Object(i.useState)(0),r=Object(O.a)(s,2),l=r[0],u=r[1],j=Object(i.useState)({user_id:"",name:"",pic:"",pronouns:"",age:0,desiredRelationship:"",education:"",QAs:[],description:"",artists_in_common:[],songs_in_common:[],tidbits:[]}),h=Object(O.a)(j,2),f=h[0],m=h[1],x=Object(i.useState)(!0),g=Object(O.a)(x,2),v=g[0],_=g[1],k=function(){return u(window.pageYOffset)},w=Object(i.useCallback)((function(){_(!0),fetch("".concat(d,"/getUnmet?email=").concat(t.email)).then((function(e){return e.json()})).then((function(e){if(200===e[1]){var i=e[0].map((function(e){return e.artists_in_common=t.top_artists.filter((function(t){return e.top_artists.includes(t)})),e.songs_in_common=t.top_songs.filter((function(t){return e.top_songs.includes(t)})),e}));n(i),m(y(i[0])),o(0)}else console.error("Populating unmet list failed.")})).catch((function(e){return console.error(e)}))}),[t.email]);return Object(i.useEffect)((function(){return window.addEventListener("scroll",k),a>=c.length?w():m(y(c[a])),_(!1),function(){return window.removeEventListener("scroll",k)}}),[w]),Object(b.jsx)(b.Fragment,{children:v?Object(b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"90vh"},children:Object(b.jsx)(K.a,{size:"large"})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(de,{meet:!0,user:f,offsetY:l,dislike:function(){fetch("".concat(d,"/dislike"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid_a:t.user_id,userid_b:f.user_id})}).then((function(e){return e.json()})).then((function(e){200!==e&&console.error("Failed to create DISLIKE relationship between users"),a+1>=c.length?w():(m(y(c[a+1])),o((function(e){return e+1})))}))},like:function(){fetch("".concat(d,"/like"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid_a:t.user_id,userid_b:f.user_id})}).then((function(e){return e.json()})).then((function(e){200!==e&&console.error("Failed to create LIKE relationship between users"),a+1>=c.length?w():(m(y(c[a+1])),o((function(e){return e+1})))}))}})})})}),he=n(306),be=n(308),fe=n(103),me=n(303),Oe=n(181),pe=["child"],xe=me.a.Item,ge=function(e){var t=e.child,n=Object(Oe.a)(e,pe);return Object(b.jsx)(xe,Object(g.a)(Object(g.a)({},n),{},{children:t}))},ve=function(e){var t=e.profile,n=e.resetImg,c=e.form,a=e.onFinish,o=e.contents,s=function(){t||n(),c.resetFields()};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(me.a,{layout:"vertical",form:c,name:"basic-info",onFinish:a,children:[o.map((function(e,t){return Object(i.createElement)(ge,Object(g.a)(Object(g.a)({},e),{},{key:t}))})),t?Object(b.jsxs)(xe,{className:"form-btns",children:[Object(b.jsx)(Q.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(b.jsx)(Q.a,{htmlType:"button",onClick:s,children:"Reset"})]}):Object(b.jsxs)(xe,{className:"form-btns",children:[Object(b.jsx)(Q.a,{type:"primary",size:"large",htmlType:"submit",children:"Submit"}),Object(b.jsx)(Q.a,{htmlType:"button",size:"large",onClick:s,children:"Reset"})]})]})})},_e=function(){var e=Object(i.useContext)(p),t=e.user,n=e.setUser,c=me.a.useForm(),a=Object(O.a)(c,1)[0],o=function(e){var t=[];return e.tidbits.map((function(e,n){var i,c=e.key,a=e.val;switch(c){case"desired_relationship":i=w();break;case"education":i=C();break;case"occupation":i=S();break;case"sexual_orientation":i=T();break;case"location":i=E();break;case"political_view":i=N();break;case"height":i=I()}return a&&(i.initialValue=a,i.defaultValue=a),t.push(i)})),e.QAs.map((function(e,n){var i;switch(e.Q){case"Life goal of mine...":i=L();break;case"Believe it or not, I...":i=P();break;case"My life peaked when...":i=A();break;case"I feel famous when...":i=F();break;case"Biggest risk I've ever taken":i=R()}return e.A&&(i.initialValue=e.A),t.push(i)})),t}(t);return Object(b.jsx)(ve,{profile:!0,form:a,onFinish:function(e){var i={facts:W(e),email:t.email};fetch("".concat(d,"/updateUserFacts"),{method:"PUT",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){if(200===e[1]){var t=y(e[0]);n(t)}})).catch((function(e){return console.error(e)}))},contents:o})},ke=le.a.Title,ye=function(){var e=Object(i.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(i.useContext)(p),o=a.user,r=a.setTokens,l=a.setUser,u=Object(i.useState)(0),j=Object(O.a)(u,2),h=j[0],f=j[1],m=function(){return f(window.pageYOffset)};Object(i.useEffect)((function(){return window.addEventListener("scroll",m),function(){return window.removeEventListener("scroll",m)}}),[]);var x=Object(s.e)();function g(){window.open("https://accounts.spotify.com/en/logout","Spotify Logout","width=700,height=500,top=40,left=40"),new URLSearchParams(x.search).delete("code"),r(null),l(null)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q,{user:o,offsetY:h}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"Favorite Artists"}),(!o||!o.top_artists.length)&&Object(b.jsx)(ke,{level:5,style:{color:"#dbdbdb"},children:"No favorite artists at this time"}),Object(b.jsx)(te,{user:o,userContent:o.top_artists,type:"artist"}),Object(b.jsx)("h3",{children:"Favorite Songs"}),(!o||!o.top_songs.length)&&Object(b.jsx)(ke,{level:5,style:{color:"#dbdbdb"},children:"No favorite songs at this time"}),Object(b.jsx)(te,{user:o,userContent:o.top_songs,type:"track"}),Object(b.jsx)("h3",{children:"Edit Info"}),o&&Object(b.jsx)(_e,{}),Object(b.jsxs)("div",{className:"deleteTxt",style:{display:"flex",justifyContent:"space-between"},children:[Object(b.jsx)("p",{style:{color:"#E8BFFB"},children:"Delete Account"}),Object(b.jsx)(be.a,{checked:n,onChange:function(){c(!0),he.a.confirm({centered:!0,title:"Delete Account",icon:Object(b.jsx)(fe.a,{}),content:"Are you sure you want to delete your account?",onOk:function(){fetch("".concat(d,"/deleteUser"),{method:"POST",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email})}).then((function(e){return e.json()})).then((function(e){200!==e[1]&&console.error("Deletion failed")})).then((function(){g()})).catch((function(e){return console.error(e)}))},onCancel:function(){c(!1)}})},"data-testid":"delete-acc"})]}),Object(b.jsx)("div",{onClick:g,children:Object(b.jsx)("button",{children:"Logout"})})]}),");"]})},we=n(37),Ce=le.a.Title,Se=function(e){var t=e.openModal,n=e.closeProfile,c=e.matchUser,a=Object(i.useState)(0),o=Object(O.a)(a,2),s=o[0],r=o[1],l=function(){return r(window.pageYOffset)};return Object(i.useEffect)((function(){return window.addEventListener("scroll",l),function(){return window.removeEventListener("scroll",l)}}),[]),Object(b.jsx)(he.a,{className:"profile-modal",centered:!0,width:"100vw",visible:t,closable:!1,footer:[Object(b.jsx)(Q.a,{onClick:n,children:"Close"},"back")],bodyStyle:{backgroundColor:"black"},children:Object(b.jsx)(de,{meet:!1,user:c,offsetY:s})})},Te=function(e){var t=e.matchList,n=e.user_id,c=e.index,a=e.imgPath,o=e.name,s=e.contact,r=e.setMatchList,l=e.matchUser,u=Object(i.useContext)(p).user,j=Object(i.useState)(!1),h=Object(O.a)(j,2),f=h[0],m=h[1];return(l=y(l)).artists_in_common=u.top_artists.filter((function(e){return l.top_artists.includes(e)})),l.songs_in_common=u.top_songs.filter((function(e){return l.top_songs.includes(e)})),Object(b.jsxs)("div",{"data-testid":"match",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",marginLeft:"1rem"},children:[Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(b.jsx)("div",{onClick:function(){m(!0)},children:a?Object(b.jsx)("img",{className:"matchPhoto",src:a,alt:"pfp"}):Object(b.jsx)("div",{className:"matchPhoto",style:{padding:0,border:"solid white"},children:Object(b.jsx)(V.a,{style:{height:"100%",width:"100%",color:"white"}})})}),Object(b.jsxs)("div",{style:{marginLeft:"1rem",marginRight:"1rem"},children:[Object(b.jsx)("h4",{children:o}),Object(b.jsx)("span",{children:s})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)(Q.a,{ghost:!0,style:{border:0},size:"medium",icon:Object(b.jsx)(H.a,{style:{color:"white"}}),onClick:function(){he.a.confirm({centered:!0,title:"Delete Match",icon:Object(b.jsx)(fe.a,{}),content:"Are you sure you want to delete this match?",onOk:function(){fetch("".concat(d,"/dislike"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid_a:u.user_id,userid_b:n})}).then((function(e){return e.json()})).then((function(e){200!==e&&console.error("Failed to create DISLIKE relationship between users");var n=Object(we.a)(t);n.splice(c,1),r(n)}))}})},"button-testid":"delete-match-".concat(c)})}),Object(b.jsx)(Se,{openModal:f,closeProfile:function(){m(!1)},matchUser:l})]})},Ee=function(){var e=Object(i.useContext)(p).user,t=Object(i.useState)([]),n=Object(O.a)(t,2),c=n[0],a=n[1];function o(e){a(e)}return Object(i.useEffect)((function(){fetch("".concat(d,"/getMatched?email=").concat(e.email)).then((function(e){return e.json()})).then((function(e){200===e[1]&&a(e[0].map((function(e,t){return Object(b.jsx)(Te,{matchList:c,setMatchList:o,index:t,user_id:e.user_id,imgPath:e.pic,name:e.name,contact:e.email,matchUser:e},t)})))})).catch((function(e){return console.error(e)}))}),[e.email,c.length]),Object(b.jsxs)("div",{className:"container",style:{margin:"1rem"},children:[Object(b.jsx)("h1",{style:{color:"white"},children:"Matches"}),c,!c.length&&Object(b.jsx)(Ce,{level:5,style:{color:"#dbdbdb",textAlign:"center"},children:"No matches yet. Let's try to meet more people~"})]})},Ne=n(62),Ie=n(168),Le=n.n(Ie),Pe=n(309),Ae=n(310),Fe=function(e){var t=e.icon,n=e.link;return Object(b.jsx)(Ne.b,{to:n,children:Object(b.jsx)(Q.a,{size:"large",ghost:!0,style:{border:0},icon:t})})},Re=function(){return Object(b.jsxs)("div",{style:{backgroundColor:"#E8BFFB",position:"fixed",bottom:0,width:"100vw",display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"4rem"},children:[Object(b.jsx)(Fe,{icon:Object(b.jsx)(Le.a,{style:{color:"black",height:"100%"}}),link:"/meet"}),Object(b.jsx)(Fe,{icon:Object(b.jsx)(Pe.a,{}),link:"/matched"}),Object(b.jsx)(Fe,{icon:Object(b.jsx)(Ae.a,{}),link:"/profile"})]})},Ue=n(300),De=n(302),Be=n(311),We=n(175);var Me=le.a.Title,Ye=le.a.Paragraph,ze=function(){var e=Object(i.useContext)(p),t=e.tokens,n=e.setUser,c=Object(s.f)(),a=Object(i.useState)(),o=Object(O.a)(a,2),r=o[0],l=o[1],u=Object(i.useState)(!1),j=Object(O.a)(u,2),h=j[0],f=j[1],m=Object(i.useState)([]),x=Object(O.a)(m,2),g=x[0],v=x[1],k=me.a.useForm(),w=Object(O.a)(k,1)[0],C=[{child:Object(b.jsx)(_.a,{}),name:"name",label:"Name",rules:[{required:!0}]},{child:Object(b.jsx)(_.a,{}),name:"email",label:"Email",rules:[{required:!0}]},{child:Object(b.jsx)(_.a,{}),name:"pronouns",label:"Pronouns",rules:[{required:!0}]},{child:Object(b.jsx)(Ue.a,{picker:"month"}),name:"birth_month",label:"Birth Month",rules:[{required:!0}]},{child:Object(b.jsx)(_.a,{}),name:"description",label:"Description",rules:[{required:!0}]},{child:Object(b.jsx)(De.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:function(e){return function(e,t){var n="image/jpeg"===e.type||"image/png"===e.type;n||We.b.error("You can only upload JPG/PNG file!");var i=e.size/1024/1024<2;return i||We.b.error("Image must smaller than 2MB!"),t(n&&i),!1}(e,(function(e){f(e)}))},onChange:function(e){h?(!function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(e.file,(function(e){l(e)})),v(Object(we.a)(e.fileList))):(l(),v([]))},fileList:g,children:r?Object(b.jsx)("div",{className:"photo",style:{backgroundImage:"url('".concat(r,"')"),width:"100%",height:"100%",borderRadius:0}}):Object(b.jsxs)("div",{className:"column-flex",children:[Object(b.jsx)(Be.a,{}),Object(b.jsx)("div",{style:{marginTop:8},children:"Upload"})]})}),name:"profile_pic",label:"Profile Picture",valuePropName:"props"}];return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(Me,{children:"Basic Info"}),Object(b.jsx)(Ye,{children:"Help us help you build your profile!"}),Object(b.jsx)(ve,{profile:!1,resetImg:function(){l()},form:w,onFinish:function(e){var i={name:e.name,email:e.email,pronouns:e.pronouns,birth_month:e.birth_month._d,description:e.description,pic:r,qas:Y(e),tidbits:M(e),access_token:t.accessToken,refresh_token:t.refreshToken};fetch("".concat(d,"/createUserFromAccessToken"),{method:"POST",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){if(200===e[1]){var t=y(e[0]);n(t),c("/profile")}})).catch((function(e){return console.error(e)}))},contents:B(C)})]})},Ke=le.a.Title,Qe=function(){return Object(b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"90vh"},children:Object(b.jsx)(Ke,{children:"404 Page not found"})})},He=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{exact:!0,path:"/",element:Object(b.jsx)(m,{})}),Object(b.jsx)(s.a,{path:"/login",element:Object(b.jsx)(m,{})}),Object(b.jsx)(s.a,{path:"/info-form",element:Object(b.jsx)(ze,{})}),Object(b.jsx)(s.a,{path:"/meet",element:Object(b.jsx)(z,{children:Object(b.jsx)(je,{})})}),Object(b.jsx)(s.a,{path:"/profile",element:Object(b.jsx)(z,{children:Object(b.jsx)(ye,{})})}),Object(b.jsx)(s.a,{path:"/matched",element:Object(b.jsx)(z,{children:Object(b.jsx)(Ee,{})})}),Object(b.jsx)(s.a,{path:"*",element:Object(b.jsx)(Qe,{})})]}),Object(b.jsx)(Re,{})]})},Je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),a(e),o(e)}))};o.a.render(Object(b.jsx)(x,{children:Object(b.jsx)(Ne.a,{children:Object(b.jsx)(He,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Je?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ve(t,e)}))}}(),qe()},40:function(e,t,n){}},[[272,1,2]]]);
//# sourceMappingURL=main.52374ab2.chunk.js.map